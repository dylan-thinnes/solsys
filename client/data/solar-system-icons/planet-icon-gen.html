<!DOCTYPE html>
<html>
<head>
	<title>PlanetGen</title>
</head>
<body>
	<!-- <img src="solar-system-icons/test.min.svg" style="position: absolute; top: 0px; left: 0px;" height="1000" width="1000"> -->
	<canvas id="planetCanvas" width="1000" height="1000" style="outline: 1px solid black; position: absolute; top: 0px; left: 0px; background-color: transparent;"></canvas>
	<script type="text/javascript" src="sinon-3.2.0.js"></script>
	<script type="text/javascript" src="rgbcolor.js"></script> 
	<script type="text/javascript" src="StackBlur.js"></script>
	<script type="text/javascript" src="canvg.js"></script>
	<script type="text/javascript">
		var ctx = document.getElementById("planetCanvas").getContext("2d");
		var convertLogs = function (callLogs) {
			var commands = [];
			var methodDictionary = [];
			for (var ii = 0; ii < callLogs.length; ii++) {
				var commandString = "";
				var isGet = typeof callLogs[ii][2] === "string";
				//commandString += "ctx." + callLogs[ii][1] + (isGet ? "" : "(");
				if (isGet) {
					commandString += "ctx." + callLogs[ii][1] + "\"" + callLogs[ii][2] + "\";";
				} else {
					var index = methodDictionary.indexOf(callLogs[ii][1]);
					if (index === -1) index = methodDictionary.push(callLogs[ii][1]) - 1;
					var funcName = "f" + index.toString();
					commandString += funcName + "(";
					for (var jj = 1; jj < callLogs[ii][2].length; jj++) {
						commandString += callLogs[ii][2][jj].toString() + (jj === (callLogs[ii][2].length - 1) ? "" : ", ");
					}
					commandString += ");";
				}
				commands[ii] = commandString;
			}
			var dictionaryCommands = "var funcNames = " + JSON.stringify(methodDictionary) + ";\n" + 'for (var ii = 0; ii < funcNames.length; ii++) window["f" + ii.toString()] = ctx[funcNames[ii]].bind(ctx);';
			return 'var ctx = document.getElementById("planetCanvas").getContext("2d");\n' + dictionaryCommands + '\nctx.save()\nctx.strokeStyle = "transparent";\n' + commands.join("\n") + "\nctx.restore();";
		}
		canvg(document.getElementById("planetCanvas"), '<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="1000" viewBox="0 0 26.458333 26.458334"><g transform="translate(0 -270.542)"><circle cx="13.229" cy="283.771" r="13.229" fill="#00aad4"/><path d="M12.408 285.099c-.224-.013-.38.644-.435 2.834-.122 4.933-.591 3.957-.767 5.329-.374 2.906.725.375 2.023 3.738a13.231 13.231 0 0 0 4.948-.96c.706-1.312-1.463-1.602-1.412-2.921.027-.671.464-1.402.605-2.104.064-.318-.052-.801-.088-.97-.103-.49-.872.523-1.017.054-.175-.563.089-1.772-.136-2.31-.608-1.458-2.181-.448-2.883-1.507-.323-.488-.614-1.17-.838-1.183zM11.075 285.018c.285.258.167-.755.313-1.42.09-.405.568-.757.496-1.188-.038-.227.287-.906.167-1.138-.24-.464-1.586-.911-2.1-1.164-.515-.252-.198-.308-.574-.41-.94-.255-1.782.852-2.097.654-.316-.197.06-.575-.684-1.122-.476-.35-.466-1.294-.981-2.035-.292-.42.06-.911-.634-.752-.531.122-.785-.46-1.133.237-.126.254.12.65.011.985-.407 1.251-1.462 3.266-1.69 4.705-.148.937.535 1.207.601 1.744.187 1.524.942 2.008 1.66 2.57.314.244.343.996.78 1.031.89.072.977.18.912-.26-.039-.272-.135-.954-.138-1.377-.002-.35.9-.776.917-1.45.004-.142.159-1.03-.01-1.239-.209-.257-.595.355-.822.056-.518-.683-1.723-.626-1.361-1.156.675-.987 1.223-.185 2.252-.113 1.03.072 2.552-.206 3.01.468.41.757.82 2.116 1.105 2.374zM9.647 286.36c-.19.074-.213.325-.24.572-.018.163-.2.325-.133.498.035.09.265.235.35.274.095.045.168-.086.27-.115.159-.046.341-.028.42-.13.155-.206-.056-.162-.174-.208a.537.537 0 0 1-.3-.29c-.099-.2.192-.608.058-.742s-.062.066-.251.14zM22.67 276.839c.315-.802-.691-.608-.653-1.048.082-.95-3.473.675-3.71.982-.15.195-1.37.987-1.562.863-.885-.574-2.313 2.384-3.127 1.676-.15-.13.11-.43-.243-1.006-.298-.486-1.209-1.216-1.386-1.723-.139-.395.301-.56.168-.898-.24-.602-.494-.9-.647-1.044-.315-.298-.175.034-.546.17-.538.197-1.577.273-1.851-.149-.143-.219.342.003.803-.352.238-.184.187-.538.396-.818.334-.45.87-.839.825-1.01-.332-1.263.004-.73.363-.923.45-.244 1.123-.524 1.73-1.017 5.321 0 9.91 3.142 12.009 7.673-.14.219-.221.655-.506.63-.368-.03-.966-.566-1.317-.566-.724 0-1.194.369-1.486.032-.158-.183.055-.319.138-.518.168-.402.45-.847.602-.954z" fill="#008033"/><path d="M17.951 293.029c-.045.226-.426.569-.345.701.08.132.427-.034.64.085.214.12.553-.702.45-.935-.102-.233-.18-.435-.329-.394-.113.032-.37.316-.416.543zM26.341 285.528c-.25.181-.504.139-.879.441-.488.394-1.112 1.143-1.493 1.382-.476.297-.556.024-.83.349-.297.352-.02.39.081.715.107.345.045.975-.067 1.23-.068.152-.337.248-.381.388-.32 1.016.152 1.757.426 2.435a13.253 13.253 0 0 0 3.143-6.94zM23.339 286.456c.448.043.396-.183.394-.703-.003-.478.312-.933.259-1.232-.03-.167-.176-.242-.244-.461-.156-.508-.432-1.063-.82-1.402-.07-.06-.061-.225-.143-.262-.744-.33-1.927.911-2.745.695-.487-.129-1.027-.43-1.272-.854-.077-.133.244-.29.226-.437-.022-.172-.387-.32-.575-.263-.156.046-.285.42-.483.637-.148.164-.38.164-.437.295-.214.492.273 1.082.43 1.623.053.183-.253.3-.204.487.219.854.946 1.584 1.726 2.242.216.182.263.942.514.991 1.16.225 2.512-1.438 3.374-1.356zM4.237 291.947c-.218.013-.486.069-.57.07-.246.005-.259.29-.422.433a13.259 13.259 0 0 0 2.016 1.88c.23-.29-.03-.715-.219-1.163-.15-.356-.055-.48-.36-.806-.073-.08-.045-.377-.252-.41a.926.926 0 0 0-.193-.004z" fill="#008033"/></g></svg>');
		console.log(convertLogs(callLogs));
	</script>
</body>
</html>